.container-fluid
  %h1= t '.title'

  .row
    .col-sm-6
      = render 'form', autopsy: @autopsy
    .col-sm-6
      #autopsy_preview
      #autopsy_errors.alert.alert-danger
  - ExaminationType.external.order(:placement).each do |examination_type|
    - key_string = "#{examination_type.category}_#{examination_type.name}_examination"
    .row
      %h1{id: "#{key_string}_head"}= t "section_title.#{examination_type.category}.#{examination_type.name}"
    .row
      .col-sm-6
        - begin # TODO remove this begin rescue when all templates are done!
          - examination = @autopsy.examination(examination_type.name)
          - examination ||= Examination.new(examination_type: examination_type)
          = render "autopsies/#{examination_type.category}/#{examination_type.name}_form", exam: examination.get
        - rescue ActionView::MissingTemplate
          = $!
      .col-sm-6
        %div.alert.alert-danger{id: "#{key_string}_errors"}
        %div{id: "#{key_string}_preview"}
